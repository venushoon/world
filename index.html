<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>프랑스 메모리 게임</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    body { font-family: 'Inter', sans-serif; }

    .card { width: 140px; height: 180px; cursor: pointer; perspective: 1000px; }
    .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
    .card.flipped .card-inner { transform: rotateY(180deg); }

    .card-face { position: absolute; inset: 0; border-radius: 12px; display: flex; flex-direction: column; -webkit-backface-visibility: hidden; backface-visibility: hidden; border: 2px solid #e5e7eb; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }

    .card-front { background-color: #3b82f6; color: white; font-size: 1.5rem; font-weight: 600; justify-content: center; align-items: center; }
    .card-back { background-color: #f3f4f6; transform: rotateY(180deg); justify-content: flex-start; align-items: center; padding-top: 8px; }

    .thumb-wrap img { width: 100px; height: 100px; border-radius: 8px; object-fit: cover; }
    .label { font-size: 0.9rem; font-weight: 700; color: #1f2937; margin-top: 6px; }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
  <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl w-full">
    <div class="flex flex-col items-center">
      <h1 class="text-3xl font-bold mb-4 text-gray-800">프랑스 메모리 게임</h1>
      <p id="message" class="text-lg text-gray-700 mb-6 font-semibold"></p>

      <div id="game-board" class="grid grid-cols-5 gap-4"></div>

      <button id="reset-button" class="mt-8 px-6 py-3 bg-blue-600 text-white rounded-full font-semibold shadow-md hover:bg-blue-700 transition duration-300 transform hover:scale-105">다시 시작</button>
    </div>
  </div>

  <script>
    const cardData = [
      { value: '에펠탑', image: 'https://picsum.photos/id/1015/300/300' },
      { value: '루브르 박물관', image: 'https://picsum.photos/id/1016/300/300' },
      { value: '마카롱', image: 'https://picsum.photos/id/1021/300/300' },
      { value: '베르사유 궁전', image: 'https://picsum.photos/id/1025/300/300' },
      { value: '노트르담 대성당', image: 'https://picsum.photos/id/1031/300/300' }
    ];

    let deck = [], flipped = [], matchedPairs = 0, lock = false;

    const board = document.getElementById('game-board');
    const msg = document.getElementById('message');
    const resetBtn = document.getElementById('reset-button');

    function initGame() {
      const duplicated = cardData.flatMap(item => [{ ...item }, { ...item }]);
      deck = shuffle(duplicated);
      matchedPairs = 0;
      flipped = [];
      lock = false;
      msg.textContent = '위는 그림, 아래는 단어입니다. 같은 쌍을 찾아보세요!';
      board.innerHTML = '';
      board.style.gridTemplateColumns = 'repeat(5, minmax(0, 1fr))';

      deck.forEach(card => {
        const el = document.createElement('div');
        el.className = 'card';
        el.dataset.value = card.value;
        el.innerHTML = `
          <div class="card-inner">
            <div class="card-face card-front">?</div>
            <div class="card-face card-back">
              <div class="thumb-wrap"><img src="${card.image}" alt="${card.value}" onerror="this.src='https://placehold.co/100x100?text=이미지+오류'"></div>
              <div class="label">${card.value}</div>
            </div>
          </div>
        `;
        el.addEventListener('click', onFlip);
        board.appendChild(el);
      });
    }

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function onFlip() {
      if (lock) return;
      if (this.classList.contains('flipped')) return;

      this.classList.add('flipped');
      flipped.push(this);

      if (flipped.length === 2) {
        lock = true;
        check();
      }
    }

    function check() {
      const [a, b] = flipped;
      const isMatch = a.dataset.value === b.dataset.value;

      if (isMatch) {
        msg.textContent = '매칭 성공!';
        a.removeEventListener('click', onFlip);
        b.removeEventListener('click', onFlip);
        flipped = [];
        lock = false;
        matchedPairs++;
        if (matchedPairs === cardData.length) {
          setTimeout(() => { msg.textContent = '축하합니다! 모든 카드를 찾았습니다!'; }, 300);
        }
      } else {
        msg.textContent = '매칭 실패. 다시 시도하세요.';
        setTimeout(() => {
          a.classList.remove('flipped');
          b.classList.remove('flipped');
          flipped = [];
          lock = false;
        }, 900);
      }
    }

    resetBtn.addEventListener('click', initGame);
    initGame();
  </script>
</body>
</html>
