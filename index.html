<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>프랑스 메모리 게임</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    body { font-family: 'Inter', sans-serif; }

    .card { width: 140px; height: 140px; cursor: pointer; perspective: 1000px; }
    .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
    .card.flipped .card-inner { transform: rotateY(180deg); }

    .card-face { position: absolute; inset: 0; border-radius: 12px; display: flex; justify-content: center; align-items: center; -webkit-backface-visibility: hidden; backface-visibility: hidden; border: 2px solid #e5e7eb; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }

    .card-front { background-color: #3b82f6; color: white; font-size: 1.5rem; font-weight: 600; }
    .card-back { background-color: #f3f4f6; transform: rotateY(180deg); font-weight: 700; font-size: 1rem; color: #1f2937; padding: 6px; text-align: center; }
    .card-back img { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
  <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl w-full">
    <div class="flex flex-col items-center">
      <h1 class="text-3xl font-bold mb-4 text-gray-800">프랑스 메모리 게임</h1>
      <p id="message" class="text-lg text-gray-700 mb-6 font-semibold"></p>

      <div id="game-board" class="grid grid-cols-5 gap-4"></div>

      <button id="reset-button" class="mt-8 px-6 py-3 bg-blue-600 text-white rounded-full font-semibold shadow-md hover:bg-blue-700 transition duration-300 transform hover:scale-105">다시 시작</button>
    </div>
  </div>

  <script>
    const pairs = [
      { value: '에펠탑', image: 'https://upload.wikimedia.org/wikipedia/commons/4/4b/Tour_Eiffel_Wikimedia_Commons_%28cropped%29.jpg' },
      { value: '루브르 박물관', image: 'https://upload.wikimedia.org/wikipedia/commons/c/c1/Louvre_Museum_7_%2814526685162%29.jpg' },
      { value: '마카롱', image: 'https://upload.wikimedia.org/wikipedia/commons/8/87/Macarons_varios.jpg' },
      { value: '베르사유 궁전', image: 'https://upload.wikimedia.org/wikipedia/commons/b/b3/Ch%C3%A2teau_de_Versailles_by_Ponsen_02_2020.jpg' },
      { value: '노트르담 대성당', image: 'https://upload.wikimedia.org/wikipedia/commons/e/e9/Paris_Notre_Dame_de_Paris_2023.jpg' }
    ];

    let deck = [], flipped = [], matchedPairs = 0, lock = false;

    const board = document.getElementById('game-board');
    const msg = document.getElementById('message');
    const resetBtn = document.getElementById('reset-button');

    function initGame() {
      // 이미지 카드와 텍스트 카드를 분리해서 덱 구성
      const imageCards = pairs.map(item => ({ type: 'image', value: item.value, content: item.image }));
      const textCards = pairs.map(item => ({ type: 'text', value: item.value, content: item.value }));
      deck = shuffle([...imageCards, ...textCards]);

      matchedPairs = 0;
      flipped = [];
      lock = false;
      msg.textContent = '같은 그림과 단어를 맞춰보세요!';
      board.innerHTML = '';
      board.style.gridTemplateColumns = 'repeat(5, minmax(0, 1fr))';

      deck.forEach(card => {
        const el = document.createElement('div');
        el.className = 'card';
        el.dataset.value = card.value;
        el.innerHTML = `
          <div class="card-inner">
            <div class="card-face card-front">?</div>
            <div class="card-face card-back">
              ${card.type === 'image' 
                ? `<img src="${card.content}" alt="${card.value}" onerror="this.src='https://placehold.co/140x140?text=이미지+오류'">` 
                : `${card.content}`}
            </div>
          </div>
        `;
        el.addEventListener('click', onFlip);
        board.appendChild(el);
      });
    }

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function onFlip() {
      if (lock) return;
      if (this.classList.contains('flipped')) return;

      this.classList.add('flipped');
      flipped.push(this);

      if (flipped.length === 2) {
        lock = true;
        check();
      }
    }

    function check() {
      const [a, b] = flipped;
      const isMatch = a.dataset.value === b.dataset.value;

      if (isMatch) {
        msg.textContent = '매칭 성공!';
        a.removeEventListener('click', onFlip);
        b.removeEventListener('click', onFlip);
        flipped = [];
        lock = false;
        matchedPairs++;
        if (matchedPairs === pairs.length) {
          setTimeout(() => { msg.textContent = '축하합니다! 모든 카드를 찾았습니다!'; }, 300);
        }
      } else {
        msg.textContent = '매칭 실패. 다시 시도하세요.';
        setTimeout(() => {
          a.classList.remove('flipped');
          b.classList.remove('flipped');
          flipped = [];
          lock = false;
        }, 900);
      }
    }

    resetBtn.addEventListener('click', initGame);
    initGame();
  </script>
</body>
</html>
