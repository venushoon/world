<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ ë©”ëª¨ë¦¬ ê²Œì„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --blue: #2563eb; /* indigo-600 */
      --red: #ef4444;  /* red-500 */
    }
    body { background: linear-gradient(180deg, #f8fafc 0%, #eef2ff 100%); }
    .board { max-width: 1100px; }
    .perspective { perspective: 1200px; }
    .card { width: 180px; height: 140px; }
    .inner { transform-style: preserve-3d; }
    .card.flipped .inner { transform: rotateY(180deg); }
    .face { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
    .front {
      background: radial-gradient(120% 120% at 0% 0%, rgba(37,99,235,0.15) 0%, transparent 60%),
                  radial-gradient(120% 120% at 100% 100%, rgba(239,68,68,0.15) 0%, transparent 60%),
                  white;
    }
    .back { transform: rotateY(180deg); }
    .flag-strip::before { /* ì¢Œìƒë‹¨ í¬ì¸íŠ¸ í”Œë˜ê·¸ */
      content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 6px;
      background: linear-gradient(90deg, #1d4ed8 0 33%, #ffffff 33% 66%, #dc2626 66% 100%);
      border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem;
    }
    .shadow-soft { box-shadow: 0 10px 20px rgba(2,6,23,0.08), 0 6px 6px rgba(2,6,23,0.06); }
    @media (max-width: 1180px) { .card { width: 160px; height: 120px; } }
  </style>
</head>
<body class="min-h-screen py-8 text-slate-800">
  <main class="mx-auto board px-4">
    <header class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6">
      <div>
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-slate-900">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ ë©”ëª¨ë¦¬ ê²Œì„</h1>
        <p class="text-slate-600 mt-1">ì‚¬ì§„ ì¹´ë“œì™€ ë‚±ë§ ì¹´ë“œë¥¼ ì§ì§€ì–´ ë³´ì„¸ìš”! (2í–‰ Ã— 5ì—´, ì´ 10ì¥)</p>
      </div>
      <div class="flex items-center gap-3">
        <button id="btn-new" class="px-4 py-2 rounded-xl bg-slate-900 text-white font-semibold shadow-soft hover:opacity-90 active:opacity-80">ìƒˆ ê²Œì„</button>
        <button id="btn-hint" class="px-4 py-2 rounded-xl bg-white ring-1 ring-slate-200 font-semibold shadow-soft hover:bg-slate-50">ì •ë‹µ íŒíŠ¸ (3ì´ˆ)</button>
      </div>
    </header>

    <section class="flex items-center gap-6 mb-4">
      <div class="flex items-center gap-2 text-slate-700"><span class="text-sm">ì´ë™ ìˆ˜:</span><span id="moves" class="text-lg font-bold">0</span></div>
      <div class="flex items-center gap-2 text-slate-700"><span class="text-sm">ì„±ê³µ ìŒ:</span><span id="matches" class="text-lg font-bold">0/5</span></div>
      <div class="ml-auto text-sm text-slate-500">ë‘ ì¥ì„ ë’¤ì§‘ì–´ <span class="font-semibold">ì‚¬ì§„-ë‚±ë§</span>ì´ ê°™ì€ ì£¼ì œë©´ ì„±ê³µ!</div>
    </section>

    <!-- ê²Œì„ ë³´ë“œ: í•­ìƒ 5ì—´, 2í–‰ -->
    <section id="board" class="grid grid-cols-5 gap-4 place-items-center"></section>

    <footer class="mt-6 text-sm text-slate-500">
      ìë£Œ ì˜ˆì‹œ: ì—í íƒ‘, ëª¨ë‚˜ë¦¬ì, ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€, ê°œì„ ë¬¸, ë² ë¥´ì‚¬ìœ  ê¶ì „. ì´ë¯¸ì§€ëŠ” êµìœ¡ ëª©ì ì˜ ì˜ˆì‹œ ë§í¬ì´ë©°, í•„ìš” ì‹œ í•™êµ ë‚´ë¶€ ì„œë²„/êµ¬ê¸€ë“œë¼ì´ë¸Œ ì´ë¯¸ì§€ë¡œ êµì²´í•˜ì„¸ìš”.
    </footer>
  </main>

  <template id="tpl-card">
    <button class="card relative perspective rounded-2xl focus:outline-none focus:ring-4 ring-indigo-200 shadow-soft group" aria-label="ì¹´ë“œ">
      <div class="inner w-full h-full transition-transform duration-300">
        <div class="face front w-full h-full rounded-2xl flex items-center justify-center flag-strip">
          <div class="text-center">
            <div class="text-2xl">ğŸƒ</div>
            <div class="mt-1 text-sm text-slate-500">ë’¤ì§‘ì–´ ë³´ì„¸ìš”</div>
          </div>
        </div>
        <div class="face back w-full h-full rounded-2xl bg-white flex items-center justify-center p-3"></div>
      </div>
    </button>
  </template>

  <script>
    // ===== ë°ì´í„° ì„¸íŠ¸ (í•„ìš” ì‹œ ì´ë¯¸ì§€ URL êµì²´) =====
    const ITEMS = [
      {
        id: 'eiffel', ko: 'ì—í íƒ‘', hint: 'Tour Eiffel',
        img: 'https://upload.wikimedia.org/wikipedia/commons/a/a8/Tour_Eiffel_Wikimedia_Commons.jpg'
      },
      {
        id: 'mona', ko: 'ëª¨ë‚˜ë¦¬ì', hint: 'Mona Lisa',
        img: 'https://upload.wikimedia.org/wikipedia/commons/6/6a/Mona_Lisa.jpg'
      },
      {
        id: 'louvre', ko: 'ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€', hint: 'MusÃ©e du Louvre',
        img: 'https://upload.wikimedia.org/wikipedia/commons/a/af/Louvre_Museum_Wikimedia_Commons.jpg'
      },
      {
        id: 'arc', ko: 'ê°œì„ ë¬¸', hint: 'Arc de Triomphe',
        img: 'https://upload.wikimedia.org/wikipedia/commons/6/6d/Arc_de_Triomphe_Paris_Wikimedia_Commons.jpg'
      },
      {
        id: 'versailles', ko: 'ë² ë¥´ì‚¬ìœ  ê¶ì „', hint: 'Palais de Versailles',
        img: 'https://upload.wikimedia.org/wikipedia/commons/5/5d/Palace_of_Versailles_Wikimedia_Commons.jpg'
      }
    ];

    // ----- ìœ í‹¸ -----
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];
    const shuffle = (arr) => { const a = [...arr]; for (let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; };

    function placeholderDataURL(label){
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'>
        <rect width='100%' height='100%' fill='#e5e7eb'/>
        <text x='50%' y='50%' text-anchor='middle' dominant-baseline='middle' font-family='sans-serif' font-size='24' fill='#111827'>${label}</text>
      </svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }

    // ----- ìƒíƒœ -----
    let deck = []; // ë Œë”ë§ìš© 10ì¥
    let first = null, second = null, lock = false;
    let moves = 0, matches = 0;

    function makeDeck(){
      const pairs = ITEMS.flatMap(item => ([
        { pair: item.id, kind: 'image', label: item.ko, hint: item.hint, img: item.img },
        { pair: item.id, kind: 'word',  label: item.ko, hint: item.hint }
      ]));
      return shuffle(pairs);
    }

    function preloadImages(list){
      list.filter(c => c.kind==='image').forEach(c => { const im = new Image(); im.src = c.img; });
    }

    function updateHUD(){
      $('#moves').textContent = moves;
      $('#matches').textContent = `${matches}/5`;
    }

    function createCardEl(card, index){
      const tpl = document.getElementById('tpl-card');
      const el = tpl.content.firstElementChild.cloneNode(true);
      el.dataset.pair = card.pair;
      el.dataset.kind = card.kind;
      el.dataset.index = index;
      el.setAttribute('aria-label', card.kind==='image' ? `${card.label} ì‚¬ì§„ ì¹´ë“œ` : `${card.label} ë‹¨ì–´ ì¹´ë“œ`);

      const back = $('.back', el);
      if(card.kind === 'image'){
        const img = document.createElement('img');
        img.src = card.img;
        img.alt = card.label + ' ì‚¬ì§„';
        img.loading = 'lazy';
        img.className = 'max-h-[100px] object-cover rounded-lg shadow-inner';
        img.onerror = () => { img.src = placeholderDataURL(card.label); };
        back.appendChild(img);
      } else {
        const box = document.createElement('div');
        box.className = 'text-center';
        const main = document.createElement('div');
        main.className = 'text-lg font-bold';
        main.textContent = card.label;
        const sub = document.createElement('div');
        sub.className = 'text-xs text-slate-500 mt-1';
        sub.textContent = card.hint || '';
        box.appendChild(main); box.appendChild(sub);
        back.appendChild(box);
      }

      el.addEventListener('click', () => onFlip(el));
      return el;
    }

    function render(){
      const board = document.getElementById('board');
      board.innerHTML = '';
      deck.forEach((c, i) => board.appendChild(createCardEl(c, i)));
    }

    function onFlip(el){
      if(lock || el.classList.contains('matched') || el.classList.contains('flipped')) return;
      el.classList.add('flipped');
      if(!first){ first = el; return; }
      second = el; lock = true; moves++; updateHUD();

      const isMatch = first.dataset.pair === second.dataset.pair && first.dataset.kind !== second.dataset.kind;
      if(isMatch){
        setTimeout(() => {
          first.classList.add('matched');
          second.classList.add('matched');
          first.setAttribute('disabled', 'true');
          second.setAttribute('disabled', 'true');
          first = second = null; lock = false; matches++; updateHUD();
          if(matches === 5) celebrate();
        }, 300);
      } else {
        setTimeout(() => {
          first.classList.remove('flipped');
          second.classList.remove('flipped');
          first = second = null; lock = false;
        }, 800);
      }
    }

    function celebrate(){
      const msg = document.createElement('div');
      msg.className = 'fixed inset-0 flex items-center justify-center bg-black/20';
      msg.innerHTML = `
        <div class='bg-white rounded-2xl p-6 shadow-soft text-center'>
          <div class='text-3xl mb-2'>ğŸ‰ ì„±ê³µ!</div>
          <p class='text-slate-600 mb-4'>ëª¨ë“  ì§ì„ ì°¾ì•˜ì–´ìš”. ë©‹ì ¸ìš”!</p>
          <button id='btn-close' class='px-4 py-2 rounded-xl bg-slate-900 text-white font-semibold hover:opacity-90'>ë‹¤ì‹œ í•˜ê¸°</button>
        </div>`;
      document.body.appendChild(msg);
      $('#btn-close', msg).addEventListener('click', () => { document.body.removeChild(msg); newGame(); });
    }

    function hint3sec(){
      const cards = $$('#board .card');
      const toFlip = cards.filter(el => !el.classList.contains('matched') && !el.classList.contains('flipped'));
      toFlip.forEach(el => el.classList.add('flipped'));
      setTimeout(() => { toFlip.forEach(el => el.classList.remove('flipped')); }, 3000);
    }

    function newGame(){
      first = second = null; lock = false; moves = 0; matches = 0; updateHUD();
      deck = makeDeck();
      preloadImages(deck);
      render();
    }

    // ì´ˆê¸°í™”
    document.getElementById('btn-new').addEventListener('click', newGame);
    document.getElementById('btn-hint').addEventListener('click', hint3sec);
    newGame();
  </script>
</body>
</html>
